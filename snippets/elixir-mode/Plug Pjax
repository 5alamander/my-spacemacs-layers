# key: pjax
# name: Plugs Pjax
# --

defmodule ${0:Plugs.Pjax} do
  import Plug.Conn
  use Phoenix.Controller

  def init(default), do: default

  def call(conn, _default) do
    use_pjax? = Enum.any?(conn.req_headers, fn x -> {"x-pjax", "true"} == x end)
    if use_pjax? do
      conn
      |> put_layout(false)
      |> assign(:use_pjax?, true)
    else
      conn |> assign(:use_pjax?, false)
    end
  end
end
